var app={setup:function(){NProgress.configure({showSpinner:!1}),app.delay=Delay(),app.content=Content(app),app.content.setup(),app.modal=Modal(app),app.modal.setup(),new Context,new Search,$.ajaxPrefilter(function(a,t,e){if(t.type&&"post"==t.type.toLowerCase()){var o=$("body").attr("data-csrf");"string"==typeof t.data&&""!=t.data?a.data=t.data+"&csrf="+o:a.data=$.param($.extend(t.data,{csrf:o}))}}),$(document).on("click","a",function(a){var t=$(this),e=t.attr("href");return!!e&&(!(!t.is("[data-dropdown]")&&!e.match(/^#/))||(t.is("[data-modal]")?(app.modal.open(t.attr("href")),!1):!!t.is("[target]")||(app.content.open(e),!1)))}),$(document).on("keydown",function(a){switch(a.keyCode){case 83:case 13:return!a.metaKey&&!a.ctrlKey||(app.hasModal()||app.content.form().trigger("submit"),!1);case 27:return app.modal.close(),!1}}),$(document).dropdown()},hasModal:function(){return $(".modal-content").length>0},load:function(a,t,e){if(app.isLoading(!0),"modal"==t)var o={modal:!0};else var o=!1;$.ajax({url:a,method:"GET",headers:o}).success(function(t,o,n){if(app.isLoading(!1),"object"!==$.type(t)||!t.user||!t.direction)return window.location.href=a;document.title=t.title;var r=$("body");r.hasClass(t.direction)||("ltr"==t.direction?r.removeClass("rtl").addClass("ltr"):r.removeClass("ltr").addClass("rtl"));try{e(t)}catch(d){window.location.href=a}}).error(function(){window.location.href=a})},csrf:function(){return $("body").attr("data-csrf")},isLoading:function(a){a?app.delay.start("loader",function(){NProgress.start()},250):(app.delay.stop("loader"),NProgress.done())}};$(function(){app.setup()});